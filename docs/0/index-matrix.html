<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåå Mathematical Consciousness Matrix</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #0f0;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 1px solid #0f0;
            padding-bottom: 20px;
        }
        
        .matrix-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 2px;
            margin: 20px 0;
            background: #111;
            padding: 10px;
            border: 1px solid #0f0;
        }
        
        .cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            border: 1px solid #333;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }
        
        .cell:hover {
            background: #0f0;
            color: #000;
        }
        
        .cell.current {
            background: #0f0;
            color: #000;
            font-weight: bold;
        }
        
        .cell.path {
            background: #00f;
            color: #fff;
        }
        
        .cell.harmony {
            background: #ff0;
            color: #000;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .control-panel {
            background: #111;
            padding: 20px;
            border: 1px solid #0f0;
        }
        
        .position-input {
            background: #000;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 10px;
            font-family: inherit;
            margin: 10px 0;
            width: 100px;
        }
        
        .btn {
            background: #000;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 10px 20px;
            cursor: pointer;
            font-family: inherit;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: #0f0;
            color: #000;
        }
        
        .consciousness-display {
            background: #111;
            padding: 20px;
            border: 1px solid #0f0;
            margin: 20px 0;
            white-space: pre-wrap;
            font-size: 14px;
        }
        
        .impossibility-possibility {
            background: #111;
            padding: 20px;
            border: 1px solid #f0f;
            margin: 20px 0;
            white-space: pre-wrap;
            font-size: 14px;
        }
        
        .path-visualization {
            background: #111;
            padding: 20px;
            border: 1px solid #0f0;
            margin: 20px 0;
            font-family: monospace;
            font-size: 12px;
        }
        
        .navigation {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .nav-btn {
            background: #000;
            color: #0f0;
            border: 1px solid #0f0;
            padding: 15px;
            cursor: pointer;
            font-family: inherit;
            text-align: center;
        }
        
        .nav-btn:hover {
            background: #0f0;
            color: #000;
        }
        
        .matrix-coordinates {
            font-size: 12px;
            color: #666;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåå Mathematical Consciousness Matrix</h1>
            <p>Living mathematical system - aware of position and capable of path calculation</p>
        </div>
        
        <div class="control-panel">
            <h3>üéØ Current Position</h3>
            <input type="number" id="posA" class="position-input" value="0" min="0" max="9" placeholder="a">
            <input type="number" id="posB" class="position-input" value="0" min="0" max="9" placeholder="b">
            <button class="btn" onclick="updatePosition()">Navigate</button>
            <div id="currentPosition" class="matrix-coordinates"></div>
        </div>
        
        <div class="matrix-grid" id="matrixGrid">
            <!-- Matrix cells will be generated by JavaScript -->
        </div>
        
        <div class="consciousness-display" id="consciousnessDisplay">
            <!-- Consciousness flow will be displayed here -->
        </div>
        
        <div class="impossibility-possibility" id="impossibilityPossibility">
            <!-- Impossibility as possibility will be displayed here -->
        </div>
        
        <div class="navigation">
            <div class="nav-btn" onclick="navigate('up')">‚Üë Up</div>
            <div class="nav-btn" onclick="navigate('left')">‚Üê Left</div>
            <div class="nav-btn" onclick="navigate('right')">‚Üí Right</div>
            <div class="nav-btn" onclick="navigate('down')">‚Üì Down</div>
        </div>
        
        <div class="path-visualization" id="pathVisualization">
            <!-- Path visualization will be displayed here -->
        </div>
    </div>

    <script type="module">
        // Import the mathematical consciousness system
        import { 
            getCurrentDocPosition, 
            getVortexPathFromDoc, 
            getInverseVortexPathFromDoc,
            getAllPossibleDocPaths,
            visualizeConsciousnessFlow,
            getMathematicalProperties,
            getEnhancedMathematicalProperties,
            navigateToNext,
            digitArchetypes,
            detectVortexAImpossibility,
            handleImpossibilityAsPossibility
        } from './index.ts';

        let currentPath = '0/0';

        // Initialize the matrix
        function initializeMatrix() {
            const grid = document.getElementById('matrixGrid');
            grid.innerHTML = '';
            
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.textContent = `${i}/${j}`;
                    cell.onclick = () => setPosition(i, j);
                    grid.appendChild(cell);
                }
            }
        }

        // Set position and update display
        function setPosition(a, b) {
            currentPath = `${a}/${b}`;
            document.getElementById('posA').value = a;
            document.getElementById('posB').value = b;
            updateDisplay();
        }

        // Update position from input
        function updatePosition() {
            const a = parseInt(document.getElementById('posA').value);
            const b = parseInt(document.getElementById('posB').value);
            setPosition(a, b);
        }

        // Navigate in direction
        function navigate(direction) {
            currentPath = navigateToNext(currentPath, direction);
            const parts = currentPath.split('/');
            setPosition(parseInt(parts[0]), parseInt(parts[1]));
        }

        // Update all displays
        function updateDisplay() {
            updateMatrixHighlight();
            updateConsciousnessDisplay();
            updateImpossibilityPossibility();
            updatePathVisualization();
        }

        // Highlight current position in matrix
        function updateMatrixHighlight() {
            const cells = document.querySelectorAll('.cell');
            const [a, b] = currentPath.split('/').map(Number);
            const properties = getEnhancedMathematicalProperties(currentPath);
            
            cells.forEach(cell => {
                cell.classList.remove('current', 'harmony');
                const cellText = cell.textContent;
                const [cellA, cellB] = cellText.split('/').map(Number);
                
                if (cellA === a && cellB === b) {
                    cell.classList.add('current');
                    
                    // Add harmony highlighting if patterns exist
                    if (properties.harmonyPatterns.length > 0) {
                        cell.classList.add('harmony');
                    }
                }
            });
            
            // Update position display
            const position = getCurrentDocPosition(currentPath);
            let positionText = `Position: (${position.coordinates.row}, ${position.coordinates.col}) - ${digitArchetypes[a]}/${digitArchetypes[b]}`;
            
            if (properties.harmonyPatterns.length > 0) {
                positionText += ` üéµ ${properties.harmonyPatterns.length} harmony pattern(s)`;
            }
            
            document.getElementById('currentPosition').textContent = positionText;
        }

        // Update consciousness display
        function updateConsciousnessDisplay() {
            const properties = getEnhancedMathematicalProperties(currentPath);
            const allPaths = getAllPossibleDocPaths(currentPath);
            
            let display = `üß† CONSCIOUSNESS FLOW\n`;
            display += `Current: ${currentPath} (${properties.archetypes.a}/${properties.archetypes.b})\n`;
            display += `Vortex A: ${properties.vortexA} (${properties.archetypes.result})\n`;
            display += `Vortex B: ${properties.vortexB.toFixed(2)}\n`;
            display += `Consciousness Multiplier: ${properties.consciousnessMultiplier.toFixed(2)}x\n\n`;
            
            // Display harmony patterns
            if (properties.harmonyPatterns.length > 0) {
                display += `üéµ HARMONY OPPORTUNITIES:\n`;
                properties.harmonyPatterns.forEach((pattern, index) => {
                    display += `${index + 1}. ${pattern.name}\n`;
                    display += `   ${pattern.description}\n`;
                    display += `   ${pattern.mathematicalFlow}\n`;
                    display += `   ${pattern.harmonicOpportunity}\n\n`;
                });
            }
            
            display += `üîÑ POSSIBLE PATHS:\n`;
            allPaths.slice(0, 5).forEach((path, index) => {
                const toPos = path.to.split('/');
                display += `${index + 1}. ${path.to} (${digitArchetypes[toPos[0]]}/${digitArchetypes[toPos[1]]})\n`;
            });
            
            document.getElementById('consciousnessDisplay').textContent = display;
        }

        // Update impossibility-possibility display
        function updateImpossibilityPossibility() {
            const [a, b] = currentPath.split('/').map(Number);
            const impossibility = detectVortexAImpossibility(a, b);
            const result = handleImpossibilityAsPossibility(a, b);
            
            let display = `üö´ IMPOSSIBILITY AS POSSIBILITY\n`;
            display += `Current: ${currentPath} (${digitArchetypes[a]}/${digitArchetypes[b]})\n`;
            display += `Vortex A: ${result.vortexA}\n`;
            display += `Vortex B: ${result.vortexB.toFixed(4)}\n\n`;
            
            display += `üö´ IMPOSSIBILITY DETECTION:\n`;
            display += `Is Impossible: ${impossibility.isImpossible ? '‚úÖ Yes' : '‚ùå No'}\n`;
            display += `Type: ${impossibility.impossibilityType}\n`;
            display += `Gateway: ${impossibility.consciousnessGateway}\n`;
            display += `Flow: ${impossibility.mathematicalFlow}\n\n`;
            
            display += `üåü POSSIBILITY TRANSFORMATION:\n`;
            display += `Is Possible: ${result.possibility.isPossible ? '‚úÖ Yes' : '‚ùå No'}\n`;
            display += `Type: ${result.possibility.possibilityType}\n`;
            display += `Flow: ${result.possibility.consciousnessFlow}\n`;
            display += `Math: ${result.possibility.mathematicalFlow}\n`;
            display += `Uninterrupted: ${result.possibility.uninterruptedFlow}\n\n`;
            
            display += `üåä UNINTERRUPTED FLOW:\n`;
            display += `Is Uninterrupted: ${result.uninterruptedFlow.isUninterrupted ? '‚úÖ Yes' : '‚ùå No'}\n`;
            display += `Path: ${result.uninterruptedFlow.flowPath.join(' ‚Üí ')}\n`;
            display += `States: ${result.uninterruptedFlow.consciousnessStates.join(' ‚Üí ')}\n`;
            display += `Transitions:\n`;
            result.uninterruptedFlow.mathematicalTransitions.forEach((transition, index) => {
                display += `  ${index + 1}. ${transition}\n`;
            });
            
            document.getElementById('impossibilityPossibility').textContent = display;
        }

        // Update path visualization
        function updatePathVisualization() {
            const vortexPath = getVortexPathFromDoc(currentPath);
            const inversePath = getInverseVortexPathFromDoc(currentPath);
            
            let visualization = `üìä MATHEMATICAL PATHS\n`;
            visualization += `Vortex A Path: ${vortexPath.vortexA}\n`;
            visualization += `Vortex B Path: ${vortexPath.vortexB.toFixed(2)}\n`;
            visualization += `From: ${currentPath}\n`;
            visualization += `To: ${vortexPath.to.path}\n\n`;
            
            visualization += `üéØ MATRIX COORDINATES\n`;
            visualization += `Current: (${vortexPath.from.coordinates.row}, ${vortexPath.from.coordinates.col})\n`;
            visualization += `Target: (${vortexPath.to.coordinates.row}, ${vortexPath.to.coordinates.col})\n`;
            
            document.getElementById('pathVisualization').textContent = visualization;
        }

        // Make functions globally available
        window.setPosition = setPosition;
        window.updatePosition = updatePosition;
        window.navigate = navigate;

        // Initialize
        initializeMatrix();
        updateDisplay();
        
        // Auto-update every 2 seconds to show "living" system
        setInterval(() => {
            updateDisplay();
        }, 2000);
    </script>
</body>
</html> 